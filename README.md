# APEXE3-API - Providing Digital Asset Analytics for algorithmic trading & analysis

[![Twitter Follow](https://img.shields.io/twitter/follow/apexe3hq?style=social&label=APEXE3HQ)](https://twitter.com/APEXE3HQ)

The APEX:E3 API gives you access to powerful analytics and market data generated by APEX:E3's Big Data Analytics Architecture.

Competition participants currently have access to the Portfolio Operations, supported markets and latest price endpoints. 

# The Portfolio Operations API

This is an API for programmatically executing portfolio operations and fetching data and analytics 

### [Install](#install)

1. Clone this repository into your project directory from [APEX:E3 GitHub repository](https://github.com/apexe3/portfolio-ops-api):
```shell
git clone git@github.com:apexe3/portfolio-ops-api.git
```

**Python**

***Python 3.8.x required***. Version 3.8.6 can be downloaded for the MAC [here](https://www.python.org/ftp/python/3.8.6/python-3.8.6-macosx10.9.pkg) and for Windows [here]( https://www.python.org/downloads/release/python-386/). 

You can check your current version of Python by typing

```shell
python --version
```
or if you are on Python 3.x.x

```shell
python3 --version
```

1. run setup.py to install dependencies
```shell
python3 examples/python/apexe3/setup.py install 
```
2. If you see errors about directory permissions then use the sudo command
```shell
sudo python3 examples/python/setup.py install 
```
**Note**
-If you are installing on windows and see the following error: “install_lib: ‘build/lib’ does not exist -- no Python modules to install”, change the directory to “apexe3-api/examples/python” instead of “apexe3-api” and run the installation from there.
-When running setup.py, if you see an error about Cython, run the following command:
```shell
pip install --upgrade Cython
```
or
```shell
pip3 install --upgrade Cython
```

### [How-To](#howto)

All scripts will require credentials, which can be obtained from your admin. 

- Supported markets can be obtained using the supported_markets.py script. An exchange parameter is required to fetch markets for an individual exchange. The exchangeId, base and quote will be required by other scripts when constructing a portfolio or adding to an existing one.

```shell
sudo python3 examples/python/supported_markets.py
```

- Latest price for any supported market can be obtained using the fetch_price.py. Case sensitive parameters have to be supplied to obtain a price. The exact values of these parameters can be obtained from the supported_markets.py script. This script can be used to estimate the value of a new portfolio or a new portfolio asset, before constructing or adding respectively, to assess the impact on your balance.

```shell
sudo python3 examples/python/fetch_price.py
```

- Any portfolios created using the GUI can be obtained using the fetch_my_portfolio_summaries.py script. Once the script is successfully run, an array of one or more JSON objects will be returned, consisting of attributes associated with each portfolio, including the portfolioId. This portfolioId can be used by other scripts to add additional assets or sell assets fully or partially. This script will also show you your current balance. 

example run:

```shell
sudo python3 examples/python/fetch_my_portfolio_summaries.py
```

- The fetch_single_portfolio_detail.py script can be used to retrieve attributes associated with one portfolio. The result will consist of an array of one or more portfolioItems. A portfolioItem consists of attributes associated with a portfolio asset. Each portfolioItem consists of an id. This id will be required when using other scripts to sell an asset fully or partially. 

example run:

```shell
sudo python3 examples/python/fetch_single_portfolio_detail.py
```

- The construct_portfolio.py script can be used to create a new portfolio. The supplied parameters consist of the portfolio's name and an array of assets. Each asset consists of case sensitive base, quote, exchangeId and amount. The backend will use the latest price, simulating a market order. The amount is the unit amount for the asset. You can use the fetch_price.py script to obtain the latest price and calculate the $value ($value = price * amount) of each asset. The API will only submit a new portfolio if you have enough balance. Once a portfolio is constructed, you will recieve its new id. This portfolio will also appear in the My Portfolios section of the GUI. 


example run:

```shell
sudo python3 examples/python/construct_portfolio.py
```

- The add_to_portfolio.py script can be used to add a new asset to an existing portfolio. The relevant portfolio's portfolioId can be obtained using the fetch_my_portfolio_summaries.py script. The API will check that you have enough balance to submit a new asset. This asset will also appear in the relevant tab of the My Portfolios section of the GUI. 

```shell
sudo python3 examples/python/add_to_portfolio.py
```

- The sell_from_portfolio.py script can be used to sell all or partial amounts of an asset. The asset to sell is identified using it's portfolioId and portfolioItemId.  Both of these id's can be obtained from the fetch_single_portfolio_detail.py script. The amount to sell is the unit amount associated with the asset. This amount must be equalTo or below the existing amount. You can use the fetch_price script to calculate the estimated $value of the sale ($value = price * amountToSell). On a partial sale, the assets new amount will appear in the relevant tab of the My Portfolios section of the GUI. The GUI will also show the new transactions and trade associated with the sale. 

```shell
sudo python3 examples/python/sell_from_portfolio.py
```

 
 





